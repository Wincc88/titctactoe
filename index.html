<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>

    <div class="container">
      
       <div class="top-section">
            <h1 class="description">A simple Tic-Tac-Toe game built with HTML, CSS, and JavaScript.</h1>
       </div>
       

        <div class="scoreboard">
            <div class="score" id="player-x-score">Player 1: X</div>
            <div class="score" id="player-o-score">Player 2: 0</div>
        </div>

        <button id="start-button">Start Game</button>

        <div class="screen-message"> </div>

           <!-- the labelling of 0, 1, 2, not needed(to be removed), just to show where X and O will be -->
        <div class="game-board">
            <div class="cell" id="cell-0">1</div>
            <div class="cell" id="cell-1">2</div>
            <div class="cell" id="cell-2">3</div>
            <div class="cell" id="cell-3">4</div>
            <div class="cell" id="cell-4">5</div>
            <div class="cell" id="cell-5">6</div>
            <div class="cell" id="cell-6">7</div>
            <div class="cell" id="cell-7">8</div>
            <div class="cell" id="cell-8">9</div>
        </div>

        <button id="reset-button">Reset Game</button>

    </div>

        <script> 



              //store gameboard as an array inside Gameboard object
              //named-cell  1 -9, position 0 - 8

            const gameboardobj = {

                
                    gameboardarry: ["1", "2", "3",
                                    "4", "5", "6",
                                    "7", "8", "9"]
                

                
            };


             const { gameboardarry } = gameboardobj; // destructuring to access the gameboard array independently
             console.log(gameboardarry); // Output: [1, 2, 3, 4, 5, 6, 7, 8, 9]
             console.log(gameboardarry[0]); // Output: 1
        

               //Because gameboardarry is a property inside the gameboardobj object â€” it's not a variable in the outer scope.
               //console.log(gameboardobj.gameboardarry); // Output: [1, 2, 3, 4, 5, 6, 7, 8, 9], right way to access the arry in the object

              const [X, O, blank] = ['X', 'O', '']; // destructuring to assign symbols to players
              console.log(X, O, 'bnk'); // Output: O X empty string/whatever blank is
              console.log(blank); // Output: empty string  .. checking if blank is working
                

              // REMEMBER TO WRAP ALL FUNCTIONS IN MODULES OR IIFE TO AVOID GLOBAL SCOPE POLLUTION
              // REMEMBER TO RETURN OBJECTS SO THE FUCTIONS CAN BE REUSED

              // initialize the gameboard with blank cells
              // const emptyboard = {}; // create an empty object to hold the gameboard cells
                // console.log (emptyboard); // Output: {}

              function getBoardStr(gameboardarry) {
                //output the text content of each cell in the gameboard
                console.log(
                    `
                    ${gameboardarry[0]}, ${gameboardarry[1]}, ${gameboardarry[2]},
                    ${gameboardarry[3]}, ${gameboardarry[4]}, ${gameboardarry[5]},
                    ${gameboardarry[6]}, ${gameboardarry[7]}, ${gameboardarry[8]}`
                );  
                
               } 
                getBoardStr(gameboardarry); // call the function to get what is in poisition 0 - 8 of the gameboararry

               
                // call the function to initialize the gameboard with blank cells
              function blankGameboard() {
                
                for (elem in gameboardarry) {
                    //elem here is the elem or space of the cell in the gameboard array
                    gameboardarry[elem] = blank; // set each cell to blank
                }   
                console.log(gameboardarry); // Output: ['', '', '', '', '', '', '', '', '']
                return gameboardarry; // return the updated gameboard array
              }
              blankGameboard(); 
               

              

              function isCellValid(gameboardarry, elem) {
                  //returns true if cell is a valid element(space/position) number and blank
                  // elem is the elem of the cell to check i.e 0 - 8
                if (elem >= 0 && elem < 9 && gameboardarry[elem] === blank) {
                    console.log("Cell is valid (blank)");
                } else {
                    console.log("Cell is not valid (not blank)");
                }
                return gameboardarry[elem] === blank; // returns true if cell is blank and elem is a valid elem(>=0 and <=8)
              }
                console.log(isCellValid(gameboardarry, 9)); // call the function to check if cell 9 is valid and also blank
                console.log(isCellValid(gameboardarry, 8));
               // getBoardStr(gameboardarry);
            
             function markCell(gameboardarry, elem, symbol) {
                // marks the cell with the player's symbol if the cell is valid (blank)
                if (isCellValid(gameboardarry, elem)) {
                    gameboardarry[elem] = symbol; // mark the cell with the player's symbol
                    console.log(`Cell ${elem} marked with ${symbol}`);
                } else {
                    console.log(`Cell ${elem} is not valid (not blank), cannot mark with ${symbol}`);
                }
                return gameboardarry; // return the updated gameboard array
              }
                

              function iswinner(gameboardarry, player) {
                
                // checks winning permutations
                const winningCombinations = [
                    [0, 1, 2], // horizontal
                    [3, 4, 5],
                    [6, 7, 8],
                    [0, 3, 6], // vertical
                    [1, 4, 7],
                    [2, 5, 8],
                    [0, 4, 8], // diagonal
                    [2, 4, 6]
                ];

                for (const combination of winningCombinations) {
                    const [a, b, c] = combination;
                    if (gameboardarry[a] && gameboardarry[a] === gameboardarry[b] && gameboardarry[a] === gameboardarry[c]) {
                        console.log(`Winner is ${gameboardarry[a]}`);
                        return gameboardarry[a]; // return the symbol of the winning player
                    }
                }
                console.log("No winner yet");
                return null; // return null if there is no winner yet
              }
                console.log(iswinner(gameboardarry, O)); // call the function to check if there is a winner
 

              function isBoardFull (gameboardarry) {
                // checks if the gameboard is full
                for (elem of gameboardarry) {
                    if (elem === blank) {
                        console.log("Gameboard is not full");
                        return false; // returns true if gameboard is not full
                    }
                }
                console.log("Gameboard is full");
                return true; // returns true if gameboard is full
              }
                console.log(isBoardFull(gameboardarry)); // call the function to check if gameboard is full
              

              const playerOne = {
                        name: "Player One",
                        symbol: "X",
                        score: 0
                    };

              const playerTwo = {
                        name: "Player Two",
                        symbol: "O",
                        score: 0
                    };

                    let currentPlayer = playerOne;

                    // Update the gameboard display
              function updateGameboardDisplay(gameboardarry) {
                for (let i = 0; i < gameboardarry.length; i++) {
                    const cell = document.getElementById(`cell-${i}`);
                    cell.textContent = gameboardarry[i];
                }
              }
                updateGameboardDisplay(gameboardarry); // call the function to update the gameboard display, else populates with 1 - 9

                    // Disable board until game starts
              let gameOn = false;
              
              function setBoardEnabled(enabled) {
                for (let i = 0; i < gameboardarry.length; i++) {
                     document.getElementById(`cell-${i}`).style.pointerEvents = enabled ? 'auto' : 'none';
                }
              }

              setBoardEnabled(false);

                    // Start button functionality
                    document.getElementById('start-button').addEventListener('click', function () {
                        blankGameboard();
                        updateGameboardDisplay(gameboardarry);
                        currentPlayer = playerOne;
                        setBoardEnabled(true);
                        gameOn = true;
                        messageDiv.textContent = `${currentPlayer.name}'s turn (${currentPlayer.symbol})`;
                    });

                    const messageDiv = document.createElement('div');
                    messageDiv.id = 'game-message';
                    document.querySelector('.screen-message').appendChild(messageDiv);

                      // Handle cell clicks
             function handleCellClick(elem) {

                if (!gameOn) return; // ignore clicks if game is not active
                 
                if (isCellValid(gameboardarry, elem) && !iswinner(gameboardarry, currentPlayer)) {

                    markCell(gameboardarry, elem, currentPlayer.symbol);
                    updateGameboardDisplay(gameboardarry);
                    
                    const winnerSymbol = iswinner(gameboardarry, currentPlayer);
                    
                    if (winnerSymbol) {
                        // alert(`${currentPlayer.name} wins!`);
                        messageDiv.textContent = `${currentPlayer.name} wins!`;
                        updatePlayerScore(currentPlayer);
                        updateScore();
                        setBoardEnabled(false);
                        gameOn = false;
                          return;
                    }

                    if (isBoardFull(gameboardarry)) {
                        // alert("It's a tie!");
                        messageDiv.textContent = "It's a tie!";
                        setBoardEnabled(false);
                        gameOn = false;
                         return;
                    }

                    if (currentPlayer === playerOne) {
                        currentPlayer = playerTwo;
                    } 
                    else {
                        currentPlayer = playerOne;
                    }
                    
                    messageDiv.textContent = `${currentPlayer.name}'s turn (${currentPlayer.symbol})`;
                }
              }

                    // Add event listeners to cells
                    for (let i = 0; i < gameboardarry.length; i++) {
                        document.getElementById(`cell-${i}`).addEventListener('click', () => handleCellClick(i));
                    }

                    // Reset button functionality
                    document.getElementById('reset-button').addEventListener('click', function () {
                        blankGameboard();
                        updateGameboardDisplay(gameboardarry);
                        currentPlayer = playerOne;
                        setBoardEnabled(false);
                        gameOn = false;
                        messageDiv.textContent = "Game reset. Click 'Start Game' to play again.";
                    });

                    // Update player score
             function updatePlayerScore(player) {
                player.score += 1;
             }

                    // Update scoreboard display
             function updateScore() {
                 document.getElementById("player-x-score").textContent = `Player X: ${playerOne.score}`;
                 document.getElementById("player-o-score").textContent = `Player O: ${playerTwo.score}`;
            }

                    



        </script>
    
</body>
</html>